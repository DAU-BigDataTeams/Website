---
title: Store Site Recommendation under the O2O Model via Multi-graph Attention Networks Paper reivew 작성중..
layout: post   
categories : paper, reivew, research
image : /assets/img/O2O 논문 썸네일.png
description: 온라인 - 오프라인 매장을 위해 적합한 매장 위치 추천 모델에 대한 논문
customexcerpt: O2O 모델에서 점주들의 필연적인 문제는 가게 위치를 선택하는 것 즉, 가게 위치 추천 문제다.
---

> [논문 원본](https://ieeexplore.ieee.org/document/9835449)  

# O2-SiteRec: Store Site Recommendation under the O2O Model via Multi-graph Attention Networks
title : Multi-graph Attention Networks를 통한 O2O 모델의 상점 위치 추천

[목차]
- [Introduction](#introduction)
<!-- - [Motivation](#motivation) -->
<!-- - [Design of O2-siteRec](#design-of-o2-siterec)-->
<!-- - [Evaluation](#evaluation)-->
<!-- - [Discission](#discission)-->

## Abstract
----
여러 배달 플랫폼을 기반으로한 O2O(Online - Offline) 매장의 등장은 사람들의 삶에 큰 편리함을 제공한다. O2O 모델에서 점주들의 필연적인 문제는 가게 위치를 선택하는 것 즉, 가게 위치 추천 문제다.  **우리는 전통적인 오프라인 매장에 대한 기존 작업이 1. 택배용량 및 파견 전략으로 인한 동적 공급 2. 배송 거리로 인한 다양한 고객요구를 포함하는 O2O 모델의 두 가지 고유한 요소로 인해 이문제를 해결 할 수 없다고 주장합니다.**  이러한 **새로운 요소를 통합하기 위해** 우리는 $O^2$-SiteRec, 다중 그래프 어텐션 네트워크를 통한 **O2O 모델의 매장 위치 추천 방법은 1. 배달 수용력 포착(capture)하기 위한 multi-semantic relation graph attention network기반 모델 2. 배달업체 수용력, 고객 선호도, 컨텍스트(전후사정?)특성이 융합된 다차원적 다중 그래프 기반 추천 모델이다.**
이 논문에서는 중국에서 가장 유명한 O2O 플랫폼 중 하나에서 39,465개의 매장과 2,360만 개의 주문으로 구성된 1개월간의 실제데이터를 기반으로 방법을 평가한다. 실험 결과는 그들의 방법이 다양한 메트릭에서 최첨단 기준선을 능가한다고 보여준다고 주장한다.

# Introduction
O2O(Online-to-Offline) 모델은 최근 몇 년 동안 점점 더 중요한 비즈니스 모델입니다. 일반적으로, 기존 오프라인 매장이나 신규 매장은 대규모 고객과 함계 O2O 플랫폼에 먼저 가입한 후 플랫폼에서 온라인 구매를 위해 고객을 안내한다. 소비자가 물건을 구매하면 플랫폼은 결제, 물류, 배송 등 나머지 절차를 완료한다. 이러한 모델의 전형적인 예는 Instacart, Uber Eats, 등..(우리나라로 치면 배달의 민족, 요기요, 배달통)과 같은 O2O 플랫폼을 통해 고객이 온라인으로 주문하는 주문형 배달앱이다. 주문이 시작되면 오프라인 상점에서 배달기사는 주문을 픽업해 짧은시간에 고객에게 배송한다.  

이 작업에서는 O2O 모델에서 매장 사이트 추천 문제를 대상으로 합니다. **기존 매장 추천 작업은 1. 소규모 설문조사 기반 방법 2. 대구모 데이터 기반 이렇게 두 범주로 나눌수 있다.** 설문 방법에서 사람들은 소규모 지원자로 부터 피드백을 얻기 위해 설문지와 인터뷰를 신중하게 설계하므로 **일부 편향된 피드백이 발생할 수 있다.**(아무래도 설문 문항을 다소 유리하게 작성하면 편향됨) 최근에는 스마트폰같은 기술 발달로 **체크인 데이터, 평점 데이터, 검색 엔진 쿼리와 같은 대규모 다중 소스 데이터를 수집할 수 있는 새로운 기회가 생겼습니다.** 연구원들은 이러한 데이터를 분석하고 기능 기반 머신 러닝 모델을 구축하여 매장에서 잠재적으로 높은 수익을 올릴 수 있는 위치를 식별한다. 이 논문의 작업도 위와 같은 범주에 속한다.(걍 저자도 데이터 분석하고 머신러닝 구축해서 했다~) 

그러나, 기존의 데이터 중심 연구는 주로 오프라인 매장을 위해 설계되었으며, 이는 수요와 공급 측면의 큰 차이로 인해 O2O 모델에서 매장 사이트 추천 문제를 해결하는 것이 적합하지 않다. 1. 공급 측면에서 오프라인 매장은 좋은 수용력 같은 요소에만 의존함. 하지만 이런 요인들 외에도 O2O 플랫폼의 배달 수용량에 따라 O2O 매장도 제약을 받는다. 예를 들어 배달의 수용량이 실시간 고객 수요를 충족할 수 없는 경우(주문 폭주??) 수요를 줄이기 위해 매장의 배달 범위를 축소시켜서 주문 수를 직접적으로 감소 시킨다. 2. 수요 측면에서, 이전 연구는 고객 소비 행동에 기반한 매장 수준 고객 선호도의 유용성을 검증했다. 하지만, 서비스가 오프라인에서 온라인으로 변화함에 따라 고객의 소비 행동도 진화한다. 예를 들어, 짧은 배달을 보장하기 위해 사람들이 직접 이동할 수 있기 때문에 전통적인 오프라인 서비스에 국한되지 않는 멀리 떨어진 매장에서 주문을 할 수 없다.(그냥 가까운 매장은 직접 찾으러 가서 굳이 멀리 떨어진 위치의 음식을 시간까지 써가며 배달 받지는 않는다?) 

이러한 격차를 해소하기 위해 이들은 수요와 공급의 새로운 측면을 고려해 O2O 매장을 위한 매장 사이트 추천 프레임워크를 설계하는 것을 목표로 한다. 이들의 작업 기회는(프레임워크 개발 기회) O2O 플랫폼이 회계 목적으로 배달 및 고객의 정보를 자연스럽게 기록하여 O2O 모델에서 매장 위치 추천에 대한 수급의 풍부한 정보를 제공한다는 것이다.(즉, O2O 플랫폼이 데이터를 방대하게 수집하고 있어서 작업하기 좋았다) 1. 공급 측면에서 플랫폼은 배달 업체의 스마트폰에 배포된 온라인 지도 서비스의 API로 부터 배달 기사의 궤적 데이터를 수집하여 매장 사이트 추천에 대한 배달 수용량의 영향을 탐색할 수 있는 기회를 제공합니다. 2. 수요 측면에서 주문 기록은 세분화된 고객 선호도를 활용할 수 있는 기회를 제공한다.(리뷰, 평점, 검색 기록 등등) 

**매장 위치 추천을 위해 이러한 기회를(O2O 플랫폼의 데이터) 활용하는 것은 다음과 같은 문제가 있다. 1. 공급 측면에서 배달 수용량과 수용량과 O2O 매장 추천 위치 간의 관계를 정량화하는 것은 간단하지 않다. 배달량을 계산하는 순진한 솔루션이 실제 배달량을 반영할 수 없다는 것을 발견했다. (섹션 2-B1) 또한 배달량은 매장의 배달 범위와 고객 선택에 동적으로 영향을 미치므로 복잡한 관계가 된다. 2. 수요 측면에서 주변 고객이 O2O 매장 위치 추천에 미치는 영향은 배달 수용량, 배달 거리, 고객 선호도 및 역사적 상호작용을 포함한 여러 동적 다차원적 요인에 의해 영향을 받는다.** 이런 다차원적 요인의 영향을 O2O 매장 위치 추천에 융합하는 것은 어려운 일이다.  

이런 문제를 해결하기 위해 저자들은 $O^2$-SiteRec 즉, multi-graph attention networks기반 매장 위치 추천 프레임워크를 설계한다. 공급자 측면에서는 배달 수용량을 파악하기 위해 배달 유동성 multi-graph를 구성하고 배송 시간을 활용하여 배달 능력을 정량화한다. 이 그래프 기준으로, **세분화된 배달 수용량 특징을 얻기 위해 multi-semantic relation graph attention network을 기반으로 배달 수용량 모델을 설계한다.**  수요자 측면에서 서로 다른 기간의 지역 및 매장 유형에 대한 여러 관점 간의 복잡한 의미론적 관계를 모델링하는 지역 유형 다차원 다중 그래프를 구성한다. **저자들은 위치 추천을 위한 여러 다차원 요인 및 기타 상호 작용 정보에 의해 영향을 받는 고객 선호도를 포착하기 위해 다차원 다중 그래프 기반 추천 모델을 설계한다.** 특히, 저자들의 주요 기여는 아래와 같다.

1. O2O(Online - to - Online) 모델에서 매장 위치 추천 연구는 저자들이 처음이다. **이들은 공급(배달 물량 증가)과 수요(소비 패턴의 진화 등)측면에서 분석한다.** 이런 특성은 O2O 모델에서 매장 위치 추천에 필수적이며, 이를 통해 기존 매장 위치 추천 방법의 한계를 해결할 수 있습니다.

2. 저자들은 $O^2$-SiteRec이라는 Multi-graph attention networks를 통해 O2O 모델에서 새로운 매장 위치 추천 프레임워크를 설계한다. 이것은. 1. 배달 수용량 특징을 포착하기 위한 multi-semantic relation graph attention network에 기반한 배달 수용량 모델. 2. 배달업체 수용량, 고객 선호도 및 컨텍스트(전후사정?) 기능이 융합된 노드 수준 및 시간 의미 체계 수준 집계가 포함된 다차원 다중 그래프 기반 추천 모델이다. 

3. 우리는 가장 큰 O2O 플랫폼 중 하나인 Eleme(한국의 배민과 유사)에서 39,465개의 매장과 2,360만 건의 주문으로 구성된 1개월 간의 실제 데이터를 기반으로 프레임워크를 평가합니다. **매장 위치 추천 방법, 그래프 기반 일반 추천 방법 및 다차원 그래프 방법을 포함한 세 가지 기준 범주로 모델을 비교합니다.** 실험 결과는 제안된 접근 방식이 NDCG@3 메트릭에서 12.18% 개선과 Precision@3 메트릭에서 9.01%의 개선을 나타내는 다른 최첨단 방법보다 성능이 우수함을 보여줍니다. 또한 모델의 핵심 구성 요소(ex. 배달 수용량 모델, 지역 유형 다차원 그래프 기반 추천 모델 및 관심 메커니즘)의 효율성과 다양한 요인(ex. 다양한 매장 유형 및 다양한 분포)의 영향을 엄격하게 평가한다.(ex. 서로 다른 매장 유형 및 후보 지역 집합의 서로 다른 분포). 결과는 이러한 중요 구성 요소가 매장 위치 추천 효과를 높이고 그들의 모델이 이런 다양한 요인에 대해 잘 수행됨을 보여준다.



# Motivation
이 섹션은 먼저 데이터 셋의 세부 정보를 소개한 다음 설계에 동기를 부여하는 공급 측면(배달 수용량)과 수요 측면(소비자 패턴분석)에 대한 관찰 내용을 설명한다. 
## A. Data
----
이들의 작업은 Eleme이라는 가장 큰 O2O 플랫폼 중 하나를 기반으로 하며, 여기서 우리는 (i). 주문 데이터 (ii). 배달 궤적(배달 경로??)데이터 (iii). 컨텍스트 데이터를 포함한 세 가지 유형의 데이터를 활용합니다. 
**Order Data** : 주문 데이터의 레코드는 (i). 주문 배송을 위한 소스 위치(즉, 매장 위치) 및 목적지 위치(즉, 고객의 위치)와 같은 공간 정보 (ii). 주문 생성 시간, 주문 픽업 시간 및 배달기사 측이 전송한 배달 시간 같은 시간적 정보를 포함하는 정보를 기록한다. 게다가 고객과 매장 간의 거리, 매장 유형과 같은 다른 컨텐스트도 있다. 이 작업에 사용된 필드를 표1에 나열합니다. 전체적으로 주문 데이터에는 2020년 10월 부터 2020년 11월까지(1개월) 중국 상하이에서 122가지 유형(가벼운 식사, 커피 및 스낵)의 39,465개 매장과 관련된 2,360만 건의 주문이 포함된다. 개인 정보를 보호하기 위해 모든 고객 ID는 플랫폼에서 익명으로 처리된다. 또한 고객의 정확한 위치는 500m x 500m 크기의 영역으로 표시된다. 또한 개별 고객의 정보를 공개하지 않는 지역 수준의 집계된 고객 통계를 활용합니다. 마찬가지로 상점 정보도 개인 정보 보호를 위해 사전 처리된다.
**Couriers' Trajectory Data** :  배달기사의 궤적 데이터는 배달기사가 근무할 때 스마트폰에서 획득한 연속적인 위치 정보를 담고 있다. 위치 정보는 택배 ID, GPS 위치 및 타임 스탬프를 포함하여 택배 동의하에 20초마다 플랫폼에 업로드 된다.
**Context Data** : 컨텍스트 정보를 나타내는 POI(Point of Interset) 및 도로 네트워크를 포함한 공공 데이터를 도입합니다. 이들은 온라인 지도 서비스 제공자로 개방형 API 기반의 POI 데이터를 얻고 OpenStreetMap에서 도로 네트워크를 추출합니다.(OSMnx) 이러한 데이터는 매장 사이트 추천에 중요한 도시의 여러 지역의 특징을 설명하는데 활용됩니다. 

![Table 1.](/assets/img/O2O%20Table1.png)
## B. Supply Aspect : analysis of courier capactiy
---
배달 수용량을 정령화하는 방법과 배달 용량이 매장과 고객에게 미치는 영향에 대해 논의합니다.

# Design of O2-siteRec
# Evaluation
# Discission